[Углублённое программирование на C/C++](https://www.youtube.com/watch?v=YXbrMny86U0&list=PLrCZzMib1e9qjGLjg83bCksf3N7FIy7jg)  

## Лекция №1.  
Удобный инструмент для дизассемблирования программы [godbolt.org](https://godbolt.org/)  

Ключ -c преобразует файл cpp в объектный файл (*.o).  
Объектный файл содержит в себе инструкции для процессора (машинный код).  

```
g++ -c .\square.cpp
```

Посмотреть содержимое объектного файла:  
Ключ -d говорит о том что файл нужно дизассемблировать.  
```
objdump -d .\square.o
```

file format pe-x86-64 - это формат объектного файла (для win)  
Секции в откомпилированном в файле.  
Это может быть:  
- Код (.text)
- Статические данные (.data)
- Таблицы строк
- Таблицы символов (.symtab)  

Для того что бы использовать в c++ код написанный на c, нужно использовать конструкцию:  
```
Extern "C"
{
    void print(int value) // print
}
```
Откомпилировать одной командой  
```
g++ .\main.cpp
```

Откомпилировать одной командой c заданным именем  
```
g++ -o my_program .\main.cpp
```

Создадим файл main.cpp:  
```
int square(int value);

int main()
{
    return square(2);
}
```

Скомпилируем и посмотрим инструкции (-r информация о релокациях).  
```
g++ -c .\main.cpp
objdump -d -r .\main.o 
```

Таблицы символов можно посмотреть следующим образом:  
```
objdump -t .\square.o 
```

Для того что бы посмотреть что делает препроцессор есть ключ -E.  
```
g++ -E .\main.cpp
```

Директивы:  
Целиком вставляет файл с именем __name__ поиск файла происходит в директории откуда вызывается подключение.     
```
#include "файл"
```

Тоже самое но поиск файла происходит в глобальных директориях.  
Указывать глобальные директории можно с помощью ключа -I.  
```
#include <файл>
```

Define (опасно): #define x y - вместо y подставляет x.  
```
#define true false // happy debugging 
#define true !!(rand() % 2) 
```

Компоновка:  
```
g++ -o my_prog main.o square.o
```

Создание библиотек:  
```
ar rc my_lib.a square.o
``` 

Утилита автоматизации [Make](https://makefiletutorial.com/):  
Синтаксис:  
```
цель: зависимость
[tab] команда
```
Пример:  
```
hello:
	echo "Hello, World"
```
